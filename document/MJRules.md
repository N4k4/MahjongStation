# 麻雀のルールについて

複数種類のルールに対応する。
そのためのルールの種類を記録する。

# 絶対に実装したいもの
Mリーグや最強戦、雀魂や天鳳など、複数のプラットフォームでも大きく分かれている項目。
これらには対応していきたい

## 人数
- 通常の4人麻雀
- ３人麻雀

## 局数
- 東風戦
- 東南戦


## 赤ドラ
数字の牌の5のうちのいくつかがドラとして扱われる赤ドラ
- なし
- 3つ
- 4つ(5ピンのみ二つ)


## 一発
- あり
- なし

## 裏ドラ
- あり
- なし


## 喰いタン
鳴いたときにタンヤオを認めるか
- あり
- なし


## ウマ
順位点
1,2,3,4位の追加、減点
一般的には、5-10の形で、1,2位のプラスと3,4位のマイナスが対象に配置されるルールが一般的だが、1,2,3,4位それぞればらばらで設定できるようにする。

## オカ
N点持ちM点返しの形式で設定する。
終局時トップの人に[(M-N)*人数]点を与える。

## 西入
全員がN点以下の時、誰かの点数がN点以上になるまで局を続ける
- あり
- なし

## トビ終了
点数がマイナスになったときにゲームを終了するかどうか
- あり
- なし

## 連荘条件
親の連荘となる条件
- 和了
- 聴牌

## オーラスの和了り止め
オーラスで親が和了ったとき、ゲームを終了するかどうか
- 続行(和了り止めなし)
- トップの時は強制的に終了
- 選択可能

## 聴牌宣言
自身が聴牌を取っていた時、流局時に聴牌と宣言するかどうか
- 強制
- 自分で選択可能


## 途中流局
局の途中で流局するようなケース。一つ一つのルールに対してあり、なしが設定される。
- 四風連打
- 四人立直
- 九種九牌
- 四開槓

## ダブロン
一つの切り牌に対して複数人がロンをするかどうか
- あり
- 頭ハネ
    - ロンをする人のうち、先に手番が来る人が和了る

## 本場の追加
本場が増える条件。あまりよくわかっていないので、ちゃんと調べる
- 連荘のみ
    - 多分雀魂はこれ。輪荘したら本場がリセットされる。
- 流局、連荘
    - Mリーグルール。子の和了以外のすべてで本場が増える。子の和了で本場がリセットされる

## 和了り牌のない聴牌
聴牌の形になっているものの、自分の手牌、副露牌によって和了り牌が消去されている場合に聴牌を認めるかどうか。
- あり
- なし


## 流局時の聴牌の宣言順序
競技麻雀では後者、ネット麻雀では前者が採用されている。
- 同時
- 親から順番に

## 発声の優先順位
ルールごとに変更される可能性があるのか不明
- Mリーグ
    -  1アガリ 2ポン・カン 3チー(ルール第章条第二条より)

## 槓ドラの表示
暗槓、大明槓、加槓で場合分けされる。基本的に大明槓と加槓で区別されるケースはないと思いますが、拡張性の保持のために区別して設定できるようにする。

それぞれについて
- 槓が成立した直後に槓ドラ表示牌の表示
- 自身が打牌をした直後にドラ表示牌を表示

で場合分けがなされる。

## 暗槓に対する搶槓
暗槓に対して搶槓を認めるかどうか
- 一切を認めない
    - Mリーグ
- 国士無双のみ認める
    - 雀魂
- すべて認める
    - このルールを採用していることを聞いたことはない

## 特殊なケースの立直
特殊なリーチを認めるかどうか。それぞれ、あり・なしで設定
- フリテンリーチ
- ツモ番のないリーチ
- 海底を引いた後の立直
    - Mリーグだとこれだけ認められていない。

## 点数計算
青天井については、役満の扱いが面倒そうなので気が向いたら
- 通常
    - 基本的には符数^飜数
    - ただし、8000点を超えると満貫などでステップを踏むようになる。
- 切り上げ満貫
    - ６０符３飜、３０符４飜を満貫とする


## 数え役満
青天井以外のルールにおいて、13飜を超えた時に役満とみなすかどうか
- あり
- なし







# 実装の優先度が中くらいのもの
ルールの差があまりないものの、変更できるようにしたほうがいいと思っているもの。

## ノーテン罰符の点数
場にN点の形。それ以外の形式があるのかは調べたい。
デフォルトは3000点として、それ以外の対応ができるかは考えたい。

## 飜数縛り
和了に必要な役の数。
自然数値で指定




# 実装の優先度が低いもの
ネット麻雀でも触れられないような細かいルール。
実装は後回しにしたいが、これにも今後の拡張仕様変更の際に対応できるように考えていきたい。

## オープン立直
- なし
- 全部開け
    - 手配のすべてを公開する
- 待ち開け
    - 手牌のうち待ちになっている部分を公開する

### 出和了りの役満化
立直者以外のふりこみを役満とするかどうか
- あり
- なし


## 後付け
後から役が確定する鳴き方。これによる和了りを認めるかどうか
- あり
- なし

# チップ
ご祝儀のためにつかうもの。賭け麻雀でしか使わないルールだと勝手に思っているので、なるだけ触れずにいたい。

# 焼き鳥
あがりがない人に課される罰符。詳細をよく知らない

# トビ賞
トビ終了した人の罰符。詳細をよく知らない


# 実装の予定のないもの
実装の予定のないもの。これらの実装ができるようにはしないかもしれない。

## チョンボ
思考エンジンならチョンボはしないでしょ、という思い。
その一方で、未実装ルールとの合わせ方の問題で、チョンボそのものを定義してもいいかもしれない。

## 麻雀牌に大きな変更を加えるそのほかのルール
麻雀牌の定義に大きく影響を与えるため、衝突に関するあれこれは一切考えません。ほかに拡張する人(いるか知らないけど)が、うまく拡張できそうだったら実装してください。

- 白ポッチ
- 5以外の赤ドラ
- それ以外の特殊ルール

